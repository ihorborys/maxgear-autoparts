{"version":3,"file":"index.js","sources":["../src/js/parse.js","../src/js/read.js","../src/js/loader.js","../src/js/modal.js","../src/js/debounce.js","../src/js/format.js","../src/js/results.js","../src/js/search.js"],"sourcesContent":["// Парсинг файлу\nconst DELIMITER = ';';\nconst NEW_LINE = '\\r\\n';\nexport const items = [];\n\nexport const parseCSV = csvData => {\n  const rows = csvData.split(NEW_LINE);\n  rows.shift(); // Видалити перший рядок (заголовки)\n  rows.forEach(row => {\n    const splitRow = row.split(DELIMITER);\n    items.push({\n      code: splitRow[0],\n      unicode: splitRow[1],\n      brand: splitRow[2],\n      desc: splitRow[3],\n      qty: splitRow[4],\n      price: splitRow[5],\n      store: splitRow[6],\n    });\n  });\n  console.log('Дані завантажені:', items);\n};\n","import { parseCSV } from './parse.js';\n\n// const fileURLs = ['../public/AUTOPARTNER.csv', '../public/GDANSK.csv', '../public/MOTOROL.csv'];\n\n// Автоматично завантажуємо файл за URL\nconst fileURL =\n  'https://ihorborys-aws-bucket.s3.eu-north-1.amazonaws.com/Prices/PRICE+AP_GDANSK_MOTOROL_+13.01.2024_R_utf_8.csv';\n\nexport const readPrice = () => {\n  // Початок заміру часу\n  console.time('Виконання readPrice');\n  return fetch(fileURL) // Повертаємо проміс\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP помилка! Статус: ${response.status}`);\n      }\n      return response.text(); // Перетворюємо відповідь у текст\n    })\n    .then(data => {\n      parseCSV(data); // Обробляємо дані\n    })\n    .catch(error => {\n      alert('Error loading file: ' + error); // Виводимо помилку\n      throw error; // Прокидаємо помилку для подальшої обробки\n      // Кінець заміру часу\n    });\n};\n\n// // // Автоматично завантажуємо файл за URL\n// // const fileURL = '../public/PRICE AP_GDANSK_MOTOROL_ 13.01.2024_R_utf_8.csv'; // Замінити на шлях до файлу\n//\n// // const fileURL =\n// //   'https://raw.githubusercontent.com/ihorborys/vite-maxgear-autoparts/gh-pages/PRICE%20AP_GDANSK_MOTOROL_%2013.01.2024_R_utf_8.csv'; // Замінити на шлях до файлу\n//\n// const fileURL =\n//   'https://ihorborys-aws-bucket.s3.eu-north-1.amazonaws.com/Prices/PRICE+AP_GDANSK_MOTOROL_+13.01.2024_R_utf_8.csv';\n//\n// export const readPrice = () => {\n//   fetch(fileURL)\n//     .then(response => response.text())\n//     .then(data => parseCSV(data))\n//     .catch(error => alert('Error loading file: ' + error));\n// };\n\n// export const readPrice = () => {\n//   return fetch(fileURL)\n//     .then(response => response.text())\n//     .then(data => parseCSV(data))\n//     .catch(error => alert('Error loading file: ' + error));\n// };\n\n// const readPrices = fileURLs => {\n//   // Створюємо масив промісів для завантаження кожного файлу\n//   const fetchPromises = fileURLs.map(url =>\n//     fetch(url).then(response => {\n//       if (!response.ok) {\n//         throw new Error(`Failed to fetch file from ${url}`);\n//       }\n//       return response.text();\n//     })\n//   );\n//\n//   // Виконуємо всі запити паралельно та об'єднуємо результати\n//   Promise.all(fetchPromises)\n//     .then(filesData => {\n//       // Масив даних з усіх файлів\n//       const combinedData = filesData.map(data => parseCSV(data));\n//\n//       // Об'єднуємо дані в один прайс (наприклад, злиття масивів)\n//       const unifiedData = combinedData.flat();\n//\n//       // Подальша обробка або вивід даних\n//       console.log('Об’єднаний прайс:', unifiedData);\n//     })\n//     .catch(error => {\n//       alert('Error loading files: ' + error);\n//     });\n// };\n//\n// // Використання\n// const fileURLs = ['../public/AUTOPARTNER.csv', '../public/GDANSK.csv', '../public/MOTOROL.csv'];\n// readPrices(fileURLs);\n","// // Імітація затримки завантаження\n// window.onload = function() {\n//   setTimeout(function() {\n//     document.getElementById('js-loader').style.display = 'none';\n//   }, 2000); // 2 секунди затримки\n// };\n\nimport { readPrice } from './read.js';\n\nwindow.onload = function() {\n  const loader = document.getElementById('js-loader');\n\n  // Викликаємо функцію readPrice\n  readPrice()\n    .then(() => {\n      console.log('Файл успішно завантажений!');\n    })\n    .catch(error => {\n      console.error('Помилка при завантаженні файлу:', error);\n    })\n    .finally(() => {\n      // Ховаємо індикатор завантаження\n      loader.style.display = 'none';\n    });\n};\n\n// // Завантажуємо всі файли і об'єднуємо їх\n// window.onload = function() {\n//   const loader = document.getElementById('js-loader');\n//\n//   // Показуємо індикатор завантаження\n//   loader.style.display = 'block';\n//\n//   // Завантажуємо всі файли паралельно\n//   Promise.all(fileURLs.map(url => fetch(url).then(response => response.text())))\n//     .then(fileContents => {\n//       // Об'єднуємо вміст файлів\n//       const combinedData = fileContents.join('\\n');\n//       console.log('Об’єднані дані:', combinedData);\n//     })\n//     .catch(error => {\n//       console.error('Помилка при завантаженні файлів:', error);\n//     })\n//     .finally(() => {\n//       // Ховаємо індикатор завантаження\n//       loader.style.display = 'none';\n//     });\n// };\n\n// // // Імітація затримки завантаження\n// window.onload = function() {\n//   setTimeout(function() {\n//     document.getElementById('js-loader').style.display = 'none';\n//     document.getElementById('content').style.display = 'block';\n//   }, 2000); // 2 секунди затримки\n// };\n\n// import { readPrice } from './read.js';\n//\n// window.onload = async function () {\n//   const loader = document.getElementById('loader');\n//   loader.style.display = 'block'; // Покажемо loader при завантаженні сторінки\n//   await readPrice(); // Чекаємо, поки файл буде завантажений\n//   loader.style.display = 'none'; // Сховаємо loader, коли файл буде завантажено\n// };\n","// Відкриття модального вікна пошуку\nconst catalogButton = document.querySelector('.search.button');\nconst modalSearch = document.querySelector('.modal-overlay');\n\ncatalogButton.addEventListener('click', event => {\n  modalSearch.classList.add('active');\n});\n\n// Закриття модального вікна пошуку\nconst closeButton = document.querySelector('.modal-close-btn');\n\ncloseButton.addEventListener('click', event => {\n  modalSearch.classList.remove('active');\n});\n","// Функція для затримки (debounce)\nexport const debounce = (func, delay) => {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => func(...args), delay);\n  };\n};\n","// Форматування коду введення\nexport function formatCode(rawCode) {\n  return rawCode.toLowerCase().replace(/[^a-zA-Z0-9]/g, '');\n}\n","// Відображення результатів\nconst keyMapping = {\n  code: 'Код',\n  unicode: 'Юнікод',\n  brand: 'Бренд',\n  desc: 'Опис',\n  price: 'Ціна, Є',\n  qty: 'Кількість',\n  store: 'Склад',\n};\n\nexport function displayResults(result) {\n  console.log(typeof result);\n  const resultsDiv = document.getElementById('results');\n\n  if (!resultsDiv) {\n    console.error('Елемент #results не знайдено.');\n    return;\n  }\n\n  if (!Array.isArray(result)) {\n    alert('Введіть дані для пошуку');\n    return;\n  }\n\n  const maxItems = 10; // Максимальна кількість позицій\n  resultsDiv.innerHTML = result\n    .slice(0, maxItems) // Беремо лише перші maxItems елементів\n    .map(\n      row => `\n      <div class=\"searched-item\"\">\n        ${\n          typeof row === 'object' && row !== null\n            ? Object.entries(row)\n                .map(([key, value]) => {\n                  const displayKey = keyMapping[key] || key; // Замінюємо ключ або залишаємо як є\n                  return `<p><strong>${displayKey}:</strong> &nbsp ${value}</p>`;\n                })\n                .join('')\n            : `<p>${row}</p>`\n        }\n      </div>\n    `\n    )\n    .join('');\n}\n","import { debounce } from './debounce.js';\nimport { formatCode } from './format.js';\nimport { items } from './parse.js';\nimport { displayResults } from './results.js';\n\n// Пошук\nconst searchInput = document.querySelector('#search');\n\nconst handleSearch = event => {\n  if (event.target.value) {\n    const searchCode = formatCode(event.target.value);\n    console.log(searchCode);\n\n    const result = items.filter(\n      item =>\n        (item.code && formatCode(item.code) === searchCode) ||\n        (item.unicode && formatCode(item.unicode) === searchCode) ||\n        (item.brand && formatCode(item.brand) === searchCode)\n    );\n    console.log(result);\n    displayResults(result);\n  }\n};\n\n// Додаємо затримку при введенні даних для пошуку\nconst debouncedSearch = debounce(handleSearch, 900); // 900 мс затримка\nsearchInput.addEventListener('input', debouncedSearch);\n"],"names":["DELIMITER","NEW_LINE","items","parseCSV","csvData","rows","row","splitRow","fileURL","readPrice","response","data","error","loader","catalogButton","modalSearch","event","closeButton","debounce","func","delay","timer","args","formatCode","rawCode","keyMapping","displayResults","result","resultsDiv","maxItems","key","value","searchInput","handleSearch","searchCode","item","debouncedSearch"],"mappings":"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"}